<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script>
        // iOS和Android的调用方法适配
        var handler = {
            callHander: function (funcName, json) {
                //if (iOS端) {
                // window.webkit.messageHandlers[funcName].postMessage(JSON.stringify(json))
                window.webkit.messageHandlers[funcName].postMessage(json)
                //}
                //if (安卓端) {
                // window[funcName].postMessage(json);
                //}
            }
        }
    
    function openSelector(param) {
        handler.callHander('openSelector', param);
    }
    
    //声明
    function share(shareData) {
        var title = shareData.title;
        var imgUrl = shareData.imgUrl;
        var link = shareData.link;
        var result = shareData.result;
        //do something
        
    }
    //调用的时候需要这么写
    function test() {
        share({
              title: "title",
              imgUrl: "http://img.dd.com/xxx.png",
              link: location.href,
              result: function(res) {
              // 函数作为参数
              myAlert(res);
              // setTimeout(function(){alert(res);},0);
              // console.log(res ? "success" : "failure");
              }
              });
    }
    
    function add(arg1, arg2) {
        return arg1 + arg2;
    }
    
    function test2() {
        var res = add(1,2);
        myAlert(res);
    }
    
    function callNative() {
        
    }
    
    function myAlert(arg) {
        setTimeout(function(){alert(arg);},0);
    }
    
    // -- Webkit --
    var JS_Fun_01 = function (){
        var args = arguments;
        var args_num = arguments.length;
        window.webkit.messageHandlers.Call.postMessage({
                                                       'functionName':'OC_Fun_01',
                                                       'arguments': args_num == 0 ? {} : JSON.stringify(args),
                                                       });
    };
    
    var JS_Fun_05 = function (){
        var args = arguments;
        var type = "JSbridge";
        var functionName = "OC_Fun_05";
        var payload = {"type": type, "functionName": functionName, "arguments": args};
        var res = prompt(JSON.stringify(payload));
        return res;
    };
    
    function wktest() {
        var res = JS_Fun_05();
        myAlert(res);
    }
    
    function wktest2() {
        
        var args = arguments;
        var args_num = arguments.length;
        window.webkit.messageHandlers.share.postMessage({
                                                        'title': 'title',
                                                        'imgUrl': 'http://img.dd.com/xxx.png',
                                                        'link': location.href,
                                                        'callback': 'myAlert(__PARAM__)',
                                                        });
    }
    
    </script>
    <html>
        <body>
            
            <p>UIWebView</p>
            
            <p><a href="zzkit://smsLogin?username=12323123&code=892845">可以打开的URLScheme</a></p>
            <p><a href="ifly://smsLogin?username=12323123&code=892845">禁止打开的URLScheme</a></p>
            <p><a href="https://www.baidu.com">可以打开的URL</a></p>
            <p><a href="http://www.baidu.com">禁止打开的URL</a></p>
            <p><a href="http://www.baidu.com">禁止打开的URL</a></p>
            
            <p><button onclick="test()">测试</button></p>
            <p><button onclick="test2()">测试</button></p>
            <p><button onclick="callNative()">测试</button></p>
            <p><button onclick="alert('aaa')">测试</button></p>
            <p><button onclick="print()">测试test.js</button></p>
            
            
            <p>WKWebView</p>
            <p><button onclick="JS_Fun_01('hahah')">WKWebView JavaScript 调OC</button></p>
            <p><button onclick="wktest()">WKWebView JavaScript 调OC方法，并同步回传值</button></p>
            <p><button onclick="wktest2()">WKWebView JavaScript 调OC方法，并异步回传值</button></p>
        </body>
    </html>
